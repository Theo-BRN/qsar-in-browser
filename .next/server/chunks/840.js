"use strict";exports.id=840,exports.ids=[840],exports.modules={1772:(e,t,s)=>{s.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var a=s(997);function __WEBPACK_DEFAULT_EXPORT__(){return(0,a.jsxs)("div",{style:{textAlign:"center"},children:["Processsing",a.jsx("div",{class:"loader"})]})}},8840:(e,t,s)=>{s.r(t),s.d(t,{default:()=>TargetGetter});var a=s(997),n=s(6689),i=s(670),r=s(1315),l=s(1664),c=s.n(l);function CompoundGetter(){let[e,t]=(0,n.useState)("Ki"),[s,l]=(0,n.useState)("B"),{target:o,_:u}=(0,n.useContext)(i.Z),{ligand:d,setLigand:h}=(0,n.useContext)(r.Z),[x,p]=(0,n.useState)(!1),[j,m]=(0,n.useState)(0);async function getFullActivityData(e){p(!0);let t="https://www.ebi.ac.uk",s=[{}],a=t+e;for(;a!==t+"null";){let e=await fetch(a),n=await e.json();s.push(...n.activities),a=t+n.page_meta.next;let i=s.length/n.page_meta.total_count*100;m(i)}return s.slice(1)}return(0,a.jsxs)("div",{children:[a.jsx("label",{children:a.jsx("input",{className:"input",placeholder:"Input Unit. Default is Ki",value:e,onChange:e=>t(e.target.value)})}),a.jsx("br",{}),a.jsx("label",{children:a.jsx("input",{className:"input",placeholder:"Input Assay Type. Default is Binding (B)",value:s,onChange:e=>l(e.target.value)})}),a.jsx("br",{}),a.jsx("br",{}),a.jsx("button",{className:"button",onClick:function(){getFullActivityData(`/chembl/api/data/activity?format=json&target_chembl_id=${o}&type=${e}&target_organism=Homo%20sapiens&assay_type=${s}&relation==`).then(e=>{h(e)})},children:"Download Data"}),a.jsx("br",{}),x&&(0,a.jsxs)("div",{children:[a.jsx("progress",{className:"progress-bar",value:j,max:100}),a.jsx("br",{}),(0,a.jsxs)("span",{style:{textAlign:"center"},children:[Math.min(j,100).toFixed(2)," %"]})]}),a.jsx("br",{}),d.length>0&&a.jsx("div",{children:a.jsx(c(),{className:"button",href:"/tools/preprocess",children:"Pre-Process Molecules"})})]})}s(6517);var o=s(5168),u=s.n(o);let d=(()=>{let e;return()=>(e||(e=new Promise((e,t)=>{u()().then(t=>{e(t)}).catch(e=>{console.log(e)})})),e)})();var h=s(1772);function DataPreProcessToolKit(){let{ligand:e,setLigand:t}=(0,n.useContext)(r.Z),[s,i]=(0,n.useState)(!0),[l,o]=(0,n.useState)(!0),[u,x]=(0,n.useState)(!0),[p,j]=(0,n.useState)(2),[m,g]=(0,n.useState)(2048),[b,f]=(0,n.useState)(null),[_,v]=(0,n.useState)(!1),[y,C]=(0,n.useState)(!1),[k,D]=(0,n.useState)(!1),[S,P]=(0,n.useState)(0);return((0,n.useEffect)(()=>{(async function(){let e=await d();f(e),v(!0)})()}),y)?a.jsx("div",{children:k?a.jsx(h.Z,{}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(c(),{className:"button-link",href:"/tools/data-distribution",children:"Data Distribution"}),"\xa0",a.jsx(c(),{className:"button-link",href:"/tools/dimension-reduction/pca",children:"PCA"})]})}):(0,a.jsxs)("div",{style:{width:"100%"},children:[a.jsx("h2",{children:"Data Processing"}),a.jsx("hr",{}),_?a.jsx("span",{children:"RDKit is Loaded âœ…"}):a.jsx("span",{children:"Loading RDKit"}),a.jsx("br",{}),a.jsx("input",{checked:s,type:"checkbox",id:"data-dedup-check",onChange:()=>i(!s)}),a.jsx("label",{htmlFor:"data-dedup-check",children:"Data De-Duplication"}),a.jsx("br",{}),a.jsx("input",{checked:l,type:"checkbox",id:"fingerprint-check",onChange:()=>o(!l)}),a.jsx("label",{htmlFor:"fingerprint-check",children:"Fingerprinting"}),a.jsx("br",{}),a.jsx("input",{checked:u,type:"checkbox",id:"pki-check",onChange:()=>x(!u)}),a.jsx("label",{htmlFor:"pki-check",children:"Convert to pKi"}),a.jsx("br",{}),a.jsx("br",{}),(0,a.jsxs)("details",{open:!1,children:[a.jsx("summary",{children:"Fingerprint Settings"}),a.jsx("label",{htmlFor:"fp-radius",children:"Radius: "}),a.jsx("input",{className:"input",id:"fp-radius",type:"number",value:p,onChange:e=>j(e.target.value)}),a.jsx("br",{}),a.jsx("label",{htmlFor:"fp-size",children:"Bit Size: "}),a.jsx("input",{className:"input",id:"fp-size",type:"number",value:m,onChange:e=>g(e.target.value)})]}),a.jsx("br",{}),a.jsx("button",{className:"button",onClick:()=>{C(!0),D(!0),setTimeout(function(){!function(){if(s){let s=e.map(({molecule_chembl_id:e,canonical_smiles:t,standard_value:s})=>({molecule_chembl_id:e,canonical_smiles:t,standard_value:s,pKi:-Math.log10(1e-8*s)})).filter((e,t,s)=>t===s.findIndex(t=>t.molecule_chembl_id===e.molecule_chembl_id&&t.canonical_smiles===e.canonical_smiles&&e.standard_value));P(s.length),l?(s.forEach(async(e,a)=>{try{let t=b.get_mol(e.canonical_smiles),n=t.get_morgan_fp_as_uint8array(JSON.stringify({radius:p,nBits:m}));s[a].fingerprint=n,t?.delete()}catch(e){console.error(e)}a===s.length-1&&t(s)}),D(!1)):t(s)}}()},3e3)},children:"Pre-Process Data"}),a.jsx("br",{}),(0,a.jsxs)("p",{children:["Filtered Ligands: ",S]})]})}function TargetGetter(){let[e,t]=(0,n.useState)([]),{target:s,setTarget:l}=(0,n.useContext)(i.Z),{ligand:c}=(0,n.useContext)(r.Z);return(0,n.useEffect)(()=>{let e=setTimeout(()=>{fetch(`https://www.ebi.ac.uk/chembl/api/data/target/search?format=json&q=${s}`).then(e=>e.json()).then(e=>{t(e.targets)}).catch(e=>{console.error("Error:",e)})},100);return()=>clearTimeout(e)},[s]),a.jsx("div",{className:"container",style:{width:"600px",height:"400px"},children:c>=0?(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{children:["Choose a Target From this List ",a.jsx("br",{}),a.jsx("input",{className:"input",placeholder:"Start Typing and Things Will Come Up. Hopefully not PTSD",list:"browsers",name:"myBrowser",onChange:e=>l(e.target.value)})]}),a.jsx("datalist",{id:"browsers",children:e&&e.map(e=>(0,a.jsxs)("option",{value:e.target_chembl_id,children:[e.pref_name," || ",e.target_chembl_id," || ",e.organism]},e.target_chembl_id))}),a.jsx(CompoundGetter,{})]}):a.jsx(DataPreProcessToolKit,{})})}}};