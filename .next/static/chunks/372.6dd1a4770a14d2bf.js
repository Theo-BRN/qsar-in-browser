(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[372],{1772:function(e,t,s){"use strict";s.d(t,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var n=s(5893);function __WEBPACK_DEFAULT_EXPORT__(){return(0,n.jsxs)("div",{style:{textAlign:"center"},children:["Processsing",(0,n.jsx)("div",{class:"loader"})]})}},8840:function(e,t,s){"use strict";let n;s.r(t),s.d(t,{default:function(){return TargetGetter}});var a=s(5893),i=s(7294),r=s(670),l=s(1315),c=s(1664),o=s.n(c);function CompoundGetter(){let[e,t]=(0,i.useState)("Ki"),[s,n]=(0,i.useState)("B"),{target:c,_:u}=(0,i.useContext)(r.Z),{ligand:h,setLigand:d}=(0,i.useContext)(l.Z),[x,p]=(0,i.useState)(!1),[j,m]=(0,i.useState)(0);async function getFullActivityData(e){p(!0);let t="https://www.ebi.ac.uk",s=[{}],n=t+e;for(;n!==t+"null";){let e=await fetch(n),a=await e.json();s.push(...a.activities),n=t+a.page_meta.next;let i=s.length/a.page_meta.total_count*100;m(i)}return s.slice(1)}return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:(0,a.jsx)("input",{className:"input",placeholder:"Input Unit. Default is Ki",value:e,onChange:e=>t(e.target.value)})}),(0,a.jsx)("br",{}),(0,a.jsx)("label",{children:(0,a.jsx)("input",{className:"input",placeholder:"Input Assay Type. Default is Binding (B)",value:s,onChange:e=>n(e.target.value)})}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("button",{className:"button",onClick:function(){getFullActivityData("/chembl/api/data/activity?format=json&target_chembl_id=".concat(c,"&type=").concat(e,"&target_organism=Homo%20sapiens&assay_type=").concat(s,"&relation==")).then(e=>{d(e)})},children:"Download Data"}),(0,a.jsx)("br",{}),x&&(0,a.jsxs)("div",{children:[(0,a.jsx)("progress",{className:"progress-bar",value:j,max:100}),(0,a.jsx)("br",{}),(0,a.jsxs)("span",{style:{textAlign:"center"},children:[Math.min(j,100).toFixed(2)," %"]})]}),(0,a.jsx)("br",{}),h.length>0&&(0,a.jsx)("div",{children:(0,a.jsx)(o(),{className:"button",href:"/tools/preprocess",children:"Pre-Process Molecules"})})]})}s(6486);var u=s(6213),h=s.n(u);let initRDKit=()=>(n||(n=new Promise((e,t)=>{h()().then(t=>{e(t)}).catch(e=>{console.log(e)})})),n);var d=s(1772);function DataPreProcessToolKit(){let{ligand:e,setLigand:t}=(0,i.useContext)(l.Z),[s,n]=(0,i.useState)(!0),[r,c]=(0,i.useState)(!0),[u,h]=(0,i.useState)(!0),[x,p]=(0,i.useState)(2),[j,m]=(0,i.useState)(2048),[g,b]=(0,i.useState)(null),[f,_]=(0,i.useState)(!1),[v,y]=(0,i.useState)(!1),[C,k]=(0,i.useState)(!1),[D,S]=(0,i.useState)(0);return((0,i.useEffect)(()=>{(async function(){let e=await initRDKit();b(e),_(!0)})()}),v)?(0,a.jsx)("div",{children:C?(0,a.jsx)(d.Z,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o(),{className:"button-link",href:"/tools/data-distribution",children:"Data Distribution"}),"\xa0",(0,a.jsx)(o(),{className:"button-link",href:"/tools/dimension-reduction/pca",children:"PCA"})]})}):(0,a.jsxs)("div",{style:{width:"100%"},children:[(0,a.jsx)("h2",{children:"Data Processing"}),(0,a.jsx)("hr",{}),f?(0,a.jsx)("span",{children:"RDKit is Loaded âœ…"}):(0,a.jsx)("span",{children:"Loading RDKit"}),(0,a.jsx)("br",{}),(0,a.jsx)("input",{checked:s,type:"checkbox",id:"data-dedup-check",onChange:()=>n(!s)}),(0,a.jsx)("label",{htmlFor:"data-dedup-check",children:"Data De-Duplication"}),(0,a.jsx)("br",{}),(0,a.jsx)("input",{checked:r,type:"checkbox",id:"fingerprint-check",onChange:()=>c(!r)}),(0,a.jsx)("label",{htmlFor:"fingerprint-check",children:"Fingerprinting"}),(0,a.jsx)("br",{}),(0,a.jsx)("input",{checked:u,type:"checkbox",id:"pki-check",onChange:()=>h(!u)}),(0,a.jsx)("label",{htmlFor:"pki-check",children:"Convert to pKi"}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("details",{open:!1,children:[(0,a.jsx)("summary",{children:"Fingerprint Settings"}),(0,a.jsx)("label",{htmlFor:"fp-radius",children:"Radius: "}),(0,a.jsx)("input",{className:"input",id:"fp-radius",type:"number",value:x,onChange:e=>p(e.target.value)}),(0,a.jsx)("br",{}),(0,a.jsx)("label",{htmlFor:"fp-size",children:"Bit Size: "}),(0,a.jsx)("input",{className:"input",id:"fp-size",type:"number",value:j,onChange:e=>m(e.target.value)})]}),(0,a.jsx)("br",{}),(0,a.jsx)("button",{className:"button",onClick:()=>{y(!0),k(!0),setTimeout(function(){!function(){if(s){let s=e.map(e=>{let{molecule_chembl_id:t,canonical_smiles:s,standard_value:n}=e;return{molecule_chembl_id:t,canonical_smiles:s,standard_value:n,pKi:-Math.log10(1e-8*n)}}).filter((e,t,s)=>t===s.findIndex(t=>t.molecule_chembl_id===e.molecule_chembl_id&&t.canonical_smiles===e.canonical_smiles&&e.standard_value));S(s.length),r?(s.forEach(async(e,n)=>{try{let t=g.get_mol(e.canonical_smiles),a=t.get_morgan_fp_as_uint8array(JSON.stringify({radius:x,nBits:j}));s[n].fingerprint=a,null==t||t.delete()}catch(e){console.error(e)}n===s.length-1&&t(s)}),k(!1)):t(s)}}()},3e3)},children:"Pre-Process Data"}),(0,a.jsx)("br",{}),(0,a.jsxs)("p",{children:["Filtered Ligands: ",D]})]})}function TargetGetter(){let[e,t]=(0,i.useState)([]),{target:s,setTarget:n}=(0,i.useContext)(r.Z),{ligand:c}=(0,i.useContext)(l.Z);return(0,i.useEffect)(()=>{let e=setTimeout(()=>{fetch("https://www.ebi.ac.uk/chembl/api/data/target/search?format=json&q=".concat(s)).then(e=>e.json()).then(e=>{t(e.targets)}).catch(e=>{console.error("Error:",e)})},100);return()=>clearTimeout(e)},[s]),(0,a.jsx)("div",{className:"container",style:{width:"600px",height:"400px"},children:c>=0?(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{children:["Choose a Target From this List ",(0,a.jsx)("br",{}),(0,a.jsx)("input",{className:"input",placeholder:"Start Typing and Things Will Come Up. Hopefully not PTSD",list:"browsers",name:"myBrowser",onChange:e=>n(e.target.value)})]}),(0,a.jsx)("datalist",{id:"browsers",children:e&&e.map(e=>(0,a.jsxs)("option",{value:e.target_chembl_id,children:[e.pref_name," || ",e.target_chembl_id," || ",e.organism]},e.target_chembl_id))}),(0,a.jsx)(CompoundGetter,{})]}):(0,a.jsx)(DataPreProcessToolKit,{})})}},6447:function(){}}]);