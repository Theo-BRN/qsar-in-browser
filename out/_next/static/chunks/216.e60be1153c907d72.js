(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[216],{15216:function(t,e,s){"use strict";let i;s.r(e),s.d(e,{initRDKit:function(){return initRDKit}});var r=s(85893),o=s(67294),n=s(96486),h=s.n(n),a=s(45697),d=s.n(a);let initRDKit=()=>(i||(i=new Promise((t,e)=>{let s=document.createElement("script");s.src="/sar-in-browser/RDKit_minimal.js",s.async=!0,document.body.appendChild(s),s.addEventListener("load",()=>{initRDKitModule().then(e=>{t(e)}).catch(t=>{console.log(t)})})})),i);let MoleculeStructure=class MoleculeStructure extends o.Component{draw(){this.props.drawingDelay?setTimeout(()=>{this.drawSVGorCanvas()},this.props.drawingDelay):this.drawSVGorCanvas()}drawSVGorCanvas(){let t=this.RDKit.get_mol(this.props.structure||"invalid"),e=this.RDKit.get_qmol(this.props.subStructure||"invalid"),s=this.isValidMol(t);if(this.props.svgMode&&s){let s=t.get_svg_with_highlights(this.getMolDetails(t,e));this.setState({svg:s})}else if(s){let s=document.getElementById(this.props.id);t.draw_to_canvas_with_highlights(s,this.getMolDetails(t,e))}null==t||t.delete(),null==e||e.delete()}isValidMol(t){return!!t}getMolDetails(t,e){if(!(this.isValidMol(t)&&this.isValidMol(e)))return JSON.stringify({...this.MOL_DETAILS,...this.props.extraDetails||{}});{let s=JSON.parse(t.get_substruct_matches(e)),i=h().isEmpty(s)?s:s.reduce((t,e)=>{let{atoms:s,bonds:i}=e;return{atoms:[...t.atoms,...s],bonds:[...t.bonds,...i]}},{bonds:[],atoms:[]});return JSON.stringify({...this.MOL_DETAILS,...this.props.extraDetails||{},...i})}}componentDidMount(){initRDKit().then(t=>{this.RDKit=t,this.setState({rdKitLoaded:!0});try{this.draw()}catch(t){console.log(t)}}).catch(t=>{console.log(t),this.setState({rdKitError:!0})})}componentDidUpdate(t){if(this.state.rdKitError||!this.state.rdKitLoaded||this.props.svgMode||this.drawOnce(),this.state.rdKitLoaded){let e=t.structure!==this.props.structure||t.svgMode!==this.props.svgMode||t.subStructure!==this.props.subStructure||t.width!==this.props.width||t.height!==this.props.height||!h().isEqual(t.extraDetails,this.props.extraDetails);e&&this.draw()}}render(){if(this.state.rdKitError)return"Error loading renderer.";if(!this.state.rdKitLoaded)return"Loading renderer...";let t=this.RDKit.get_mol(this.props.structure||"invalid"),e=this.isValidMol(t);return(null==t||t.delete(),e)?this.props.svgMode?(0,r.jsx)("div",{title:this.props.structure,className:"molecule-structure-svg "+(this.props.className||""),style:{width:this.props.width,height:this.props.height},dangerouslySetInnerHTML:{__html:this.state.svg}}):(0,r.jsx)("div",{className:"molecule-canvas-container "+(this.props.className||""),children:(0,r.jsx)("canvas",{title:this.props.structure,id:this.props.id,width:this.props.width,height:this.props.height})}):(0,r.jsx)("span",{title:"Cannot render structure: ".concat(this.props.structure),children:"Render Error."})}constructor(t){super(t),this.drawOnce=(()=>{let t=!1;return()=>{t||(t=!0,this.draw())}})(),this.MOL_DETAILS={width:this.props.width,height:this.props.height,bondLineWidth:1,addStereoAnnotation:!0,...this.props.extraDetails},this.state={svg:void 0,rdKitLoaded:!1,rdKitError:!1}}};MoleculeStructure.propTypes={id:d().string.isRequired,className:d().string,svgMode:d().bool,width:d().number,height:d().number,structure:d().string.isRequired,subStructure:d().string,extraDetails:d().object,drawingDelay:d().number},MoleculeStructure.defaultProps={subStructure:"",className:"",width:250,height:200,svgMode:!1,extraDetails:{},drawingDelay:void 0},e.default=MoleculeStructure},92703:function(t,e,s){"use strict";var i=s(50414);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,t.exports=function(){function shim(t,e,s,r,o,n){if(n!==i){var h=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}function getShim(){return shim}shim.isRequired=shim;var t={array:shim,bigint:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return t.PropTypes=t,t}},45697:function(t,e,s){t.exports=s(92703)()},50414:function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}}]);