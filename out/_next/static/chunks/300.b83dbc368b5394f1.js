(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[300],{51772:function(t,e,a){"use strict";a.d(e,{Z:function(){return Loader}});var n=a(85893),r=a(9008),i=a.n(r);function Loader(t){let{loadingText:e="Processsing..."}=t;return(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:e})}),e,(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"loader"})})]})}},21267:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return RandomForest}});var n=a(85893),r=a(67294),i=a(91315),s=a(82023),l=a(15935),c=a(18323),o=a(76519),d=a(51772),u=a(73877),BarChart=t=>{let{mae:e,r2:a}=t;if(!e||!a||e.length!==a.length)return(0,n.jsx)("div",{children:"Error: Both mae and r2 arrays are required and must have the same length."});let i=(0,r.useRef)();return(0,r.useEffect)(()=>{let t={top:10,right:30,bottom:40,left:70},n=800-t.left-t.right,r=400-t.top-t.bottom,s=u.Ys(i.current).select("svg");if(s.empty()){let s=u.Ys(i.current).append("svg").attr("width",n+t.left+t.right).attr("height",r+t.top+t.bottom).append("g").attr("transform","translate(".concat(t.left,",").concat(t.top,")")),l=Array.from({length:e.length},(t,e)=>"fold".concat(e+1)),c=["MAE","R2"],o=u.tiA().domain(l).range([0,n]).padding([.2]);s.append("g").attr("transform","translate(0, ".concat(r,")")).call(u.LLu(o).tickSize(0));let d=u.BYU().domain([0,u.Fp7([...e,...a])]).range([r,0]);s.append("g").call(u.y4O(d));let p=u.tiA().domain(c).range([0,o.bandwidth()]).padding([.05]),m=u.PKp().domain(c).range(["#e41a1c","#377eb8"]);s.append("g").selectAll("g").data(l).join("g").attr("transform",t=>"translate(".concat(o(t),", 0)")).selectAll("rect").data(function(t,n){return c.map(t=>({key:t,value:"MAE"===t?e[n]:a[n]}))}).join("rect").attr("x",t=>p(t.key)).attr("y",t=>d(t.value)).attr("width",p.bandwidth()).attr("height",t=>r-d(t.value)).attr("fill",t=>m(t.key));let f=s.append("g").attr("transform","translate(".concat(n-30,", 0)"));f.selectAll("rect").data(c).enter().append("rect").attr("x",0).attr("y",(t,e)=>20*e).attr("width",20).attr("height",10).attr("fill",t=>m(t)),f.selectAll("text").data(c).enter().append("text").attr("x",30).attr("y",(t,e)=>20*e+8).text(t=>t).style("font-size","12px").style("fill","black")}},[e,a]),(0,n.jsx)("div",{id:"my_dataviz",ref:i})};function RandomForest(){let{ligand:t}=(0,r.useContext)(i.Z),[e,a]=(0,r.useState)(!1),[c,u]=(0,r.useState)(0),[p,m]=(0,r.useState)({}),[f,h]=(0,r.useState)("C1=NC(=C2C(=N1)N(C=N2)C3C(C(C(O3)CO)O)O)N"),[g,x]=(0,r.useState)(null),[y,j]=(0,r.useState)(!1),[v,b]=(0,r.useState)("Yet to be predicted");(0,r.useEffect)(()=>{setTimeout(()=>{rfRunner()},1e3),async function(){let t=await (0,l.F)();x(t),j(!0)}()},[]);let rfRunner=()=>{a(!1);var e=t.map(t=>t.fingerprint),n=t.map(t=>t.pKi);let r=new o.KFold({nSplits:5}),i=[],l=[];for(let{trainIndex:t,testIndex:a}of r.split(e,n))try{let r=new s.L({seed:3,maxFeatures:.5,replacement:!1,nEstimators:80}),c=Array.from(t.dataSync()).map(t=>e[t]),d=Array.from(t.dataSync()).map(t=>n[t]);r.train(c,d);let u=Array.from(a.dataSync()).map(t=>e[t]),p=Array.from(a.dataSync()).map(t=>n[t]),m=r.predict(u),f=o.metrics.meanAbsoluteError(p,m),h=o.metrics.r2Score(p,m);console.log(f,h),i.push(f),l.push(h)}finally{t.dispose(),a.dispose()}let c=new s.L({seed:3,maxFeatures:.5,replacement:!1,nEstimators:80});c.train(e,n),m(c.toJSON()),u([i,l]),a(!0)};return e?(0,n.jsx)("div",{className:"main-container",children:(0,n.jsxs)("div",{className:"container",children:[y?(0,n.jsx)("span",{children:"RDKit is Loaded âœ…"}):(0,n.jsx)("span",{children:"Loading RDKit"}),(0,n.jsx)("h3",{children:"Random Forest performance across 5 folds"}),(0,n.jsx)(BarChart,{mae:c[0],r2:c[1]}),(0,n.jsx)("input",{className:"input",type:"text",placeholder:f,onChange:t=>h(t.target.value)}),(0,n.jsx)("br",{}),(0,n.jsx)("button",{className:"button",onClick:()=>{b("Processing....");let t=g.get_mol(f),e=t.get_morgan_fp_as_uint8array(JSON.stringify({radius:2,nBits:2048})),a=s.L.load(p),n=a.predict([e]);b(n),null==t||t.delete()},children:"Predict on SMILES"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("span",{children:v})]})}):(0,n.jsx)("div",{className:"main-container",children:(0,n.jsx)("div",{className:"container",children:(0,n.jsx)(d.Z,{})})})}o.setBackend(c)},15935:function(t,e,a){"use strict";let n;a.d(e,{F:function(){return initRDKit}}),a(96486);let initRDKit=()=>(n||(n=new Promise((t,e)=>{let a=document.createElement("script");a.src="/sar-in-browser/RDKit_minimal.js",a.async=!0,document.body.appendChild(a),a.addEventListener("load",()=>{initRDKitModule().then(e=>{t(e)}).catch(t=>{console.log(t)})})})),n)},75410:function(){},48628:function(){},31601:function(){},67792:function(){},34977:function(){},75042:function(){}}]);