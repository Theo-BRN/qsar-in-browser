(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[597],{51772:function(e,t,s){"use strict";s.d(t,{Z:function(){return Loader}});var n=s(85893),a=s(9008),i=s.n(a);function Loader(e){let{loadingText:t="Processsing..."}=e;return(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:t})}),t,(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"loader"})})]})}},62597:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return TargetGetter}});var n=s(85893),a=s(67294),i=s(70670),r=s(91315),l=s(41664),c=s.n(l);function CompoundGetter(){let[e,t]=(0,a.useState)("Ki"),[s,l]=(0,a.useState)("B"),{target:o,_:u}=(0,a.useContext)(i.Z),{ligand:d,setLigand:h}=(0,a.useContext)(r.Z),[p,x]=(0,a.useState)(!1),[j,m]=(0,a.useState)(0);async function getFullActivityData(e){x(!0);let t="https://www.ebi.ac.uk",s=[{}],n=t+e;for(;n!==t+"null";){let e=await fetch(n),a=await e.json();s.push(...a.activities),n=t+a.page_meta.next;let i=s.length/a.page_meta.total_count*100;m(i)}return s.slice(1)}return(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:(0,n.jsx)("input",{className:"input",placeholder:"Input Unit. Default is Ki",value:e,onChange:e=>t(e.target.value)})}),(0,n.jsx)("br",{}),(0,n.jsx)("label",{children:(0,n.jsx)("input",{className:"input",placeholder:"Input Assay Type. Default is Binding (B)",value:s,onChange:e=>l(e.target.value)})}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("button",{className:"button",onClick:function(){getFullActivityData("/chembl/api/data/activity?format=json&target_chembl_id=".concat(o,"&type=").concat(e,"&target_organism=Homo%20sapiens&assay_type=").concat(s,"&relation==")).then(e=>{h(e)})},children:"Download Data"}),(0,n.jsx)("br",{}),p&&(0,n.jsxs)("div",{children:[(0,n.jsx)("progress",{className:"progress-bar",value:j,max:100}),(0,n.jsx)("br",{}),(0,n.jsxs)("span",{style:{textAlign:"center"},children:[Math.min(j,100).toFixed(2)," %"]})]}),(0,n.jsx)("br",{}),d.length>0&&(0,n.jsx)("div",{children:(0,n.jsx)(c(),{className:"button",href:"/tools/preprocess",children:"Pre-Process Molecules"})})]})}var o=s(15935),u=s(51772),d=s(11163);function DataPreProcessToolKit(){let e=(0,d.useRouter)(),{ligand:t,setLigand:s}=(0,a.useContext)(r.Z),[i,l]=(0,a.useState)(!0),[c,h]=(0,a.useState)(!0),[p,x]=(0,a.useState)(!0),[j,m]=(0,a.useState)(2),[g,b]=(0,a.useState)(2048),[f,v]=(0,a.useState)(null),[_,y]=(0,a.useState)(!1),[C,k]=(0,a.useState)(!1),[D,S]=(0,a.useState)(!1),[w,F]=(0,a.useState)(0);return((0,a.useEffect)(()=>{(async function(){let e=await (0,o.F)();v(e),y(!0)})()}),C)?(0,n.jsx)("div",{children:D?(0,n.jsx)(u.Z,{}):(0,n.jsx)(n.Fragment,{})}):(0,n.jsxs)("div",{style:{width:"100%"},children:[(0,n.jsx)("h2",{children:"Data Processing"}),(0,n.jsx)("hr",{}),_?(0,n.jsx)("span",{children:"RDKit is Loaded âœ…"}):(0,n.jsx)("span",{children:"Loading RDKit"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{checked:i,type:"checkbox",id:"data-dedup-check",onChange:()=>l(!i)}),(0,n.jsx)("label",{htmlFor:"data-dedup-check",children:"Data De-Duplication"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{checked:c,type:"checkbox",id:"fingerprint-check",onChange:()=>h(!c)}),(0,n.jsx)("label",{htmlFor:"fingerprint-check",children:"Fingerprinting"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{checked:p,type:"checkbox",id:"pki-check",onChange:()=>x(!p)}),(0,n.jsx)("label",{htmlFor:"pki-check",children:"Convert to pKi"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("details",{open:!1,children:[(0,n.jsx)("summary",{children:"Fingerprint Settings"}),(0,n.jsx)("label",{htmlFor:"fp-radius",children:"Radius: "}),(0,n.jsx)("input",{className:"input",id:"fp-radius",type:"number",value:j,onChange:e=>m(e.target.value)}),(0,n.jsx)("br",{}),(0,n.jsx)("label",{htmlFor:"fp-size",children:"Bit Size: "}),(0,n.jsx)("input",{className:"input",id:"fp-size",type:"number",value:g,onChange:e=>b(e.target.value)})]}),(0,n.jsx)("br",{}),(0,n.jsx)("button",{className:"button",onClick:()=>{k(!0),S(!0),setTimeout(function(){!function(){if(i){let n=t.map(e=>{let{molecule_chembl_id:t,canonical_smiles:s,standard_value:n}=e,a=-Math.log10(1e-8*n).toFixed(2);return{molecule_chembl_id:t,canonical_smiles:s,standard_value:n,pKi:a}}).filter((e,t,s)=>t===s.findIndex(t=>t.molecule_chembl_id===e.molecule_chembl_id&&t.canonical_smiles===e.canonical_smiles&&e.standard_value));F(n.length),c?(n.forEach(async(e,t)=>{try{let s=f.get_mol(e.canonical_smiles),a=s.get_morgan_fp(JSON.stringify({radius:j,nBits:g}));a=function(e){let t=[];for(let s=0;s<e.length;s++)t.push(parseFloat(e[s]));return t}(a),n[t].fingerprint=a,null==s||s.delete()}catch(e){console.error(e)}t===n.length-1&&s(n)}),S(!1),e.push("/tools/distribution/data")):s(n)}}()},500)},children:"Pre-Process Data"}),(0,n.jsx)("br",{}),(0,n.jsxs)("p",{children:["Filtered Ligands: ",w]})]})}function TargetGetter(){let[e,t]=(0,a.useState)([]),{target:s,setTarget:l}=(0,a.useContext)(i.Z),{ligand:c}=(0,a.useContext)(r.Z);return(0,a.useEffect)(()=>{let e=setTimeout(()=>{fetch("https://www.ebi.ac.uk/chembl/api/data/target/search?format=json&q=".concat(s)).then(e=>e.json()).then(e=>{t(e.targets)}).catch(e=>{console.error("Error:",e)})},100);return()=>clearTimeout(e)},[s]),(0,n.jsx)("div",{className:"container",style:{width:"600px",height:"400px"},children:c>=0?(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{children:["Choose a Target From this List ",(0,n.jsx)("br",{}),(0,n.jsx)("input",{className:"input",placeholder:"Start Typing and Things Will Come Up. Hopefully not PTSD",list:"browsers",name:"myBrowser",onChange:e=>l(e.target.value)})]}),(0,n.jsx)("datalist",{id:"browsers",children:e&&e.map(e=>(0,n.jsxs)("option",{value:e.target_chembl_id,children:[e.pref_name," || ",e.target_chembl_id," || ",e.organism]},e.target_chembl_id))}),(0,n.jsx)(CompoundGetter,{})]}):(0,n.jsx)(DataPreProcessToolKit,{})})}},15935:function(e,t,s){"use strict";let n;s.d(t,{F:function(){return initRDKit}}),s(96486);let initRDKit=()=>(n||(n=new Promise((e,t)=>{let s=document.createElement("script");s.src="/sar-in-browser/RDKit_minimal.js",s.async=!0,document.body.appendChild(s),s.addEventListener("load",()=>{initRDKitModule().then(t=>{e(t)}).catch(e=>{console.log(e)})})})),n)},11163:function(e,t,s){e.exports=s(38355)}}]);